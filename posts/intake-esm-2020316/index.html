<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " vocab="http://ogp.me/ns" lang="en">
<head>
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158200162-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-158200162-1');
    </script><meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Intake-esm Release 2020.3.16 | Xdev</title>
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../../assets/css/main.css">
<link rel="stylesheet" type="text/css" href="../../assets/css/icons.css">
<link href="https://fonts.googleapis.com/css?family=Audiowide%7CCrimson+Pro%7CMerriweather%7CSaira+Stencil+One&amp;display=swap" rel="stylesheet">
<link rel="apple-touch-icon" sizes="180x180" href="../../assets/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../assets/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../assets/img/favicon-16x16.png">
<link rel="manifest" href="../../assets/site.webmanifest">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#1A658F">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://ncar.github.io/xdev/posts/intake-esm-2020316/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Anderson Banihirwe">
<link rel="prev" href="../we-are-xdev/" title="We are Xdev!" type="text/html">
<link rel="next" href="../templating-isnt-just-for-web-developers/" title="Templating isn't just for Web Developers!" type="text/html">
<meta property="og:site_name" content="Xdev">
<meta property="og:title" content="Intake-esm Release 2020.3.16">
<meta property="og:url" content="https://ncar.github.io/xdev/posts/intake-esm-2020316/">
<meta property="og:description" content="I'm pleased to announce the release of intake-esm version 2020.3.16. This is a new release with bug fixes and new features. Everyone is invited to give it a try, and make their thoughts, suggestions, ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-03-18T09:00:00-06:00">
<meta property="article:tag" content="intake">
<meta property="article:tag" content="tooling">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@NCARXdev">
</head>
<body>
  <div class="site-wrapper" style="background: #FFF">

    
    <header class="site-header outer"><div class="inner">
        
    <nav class="site-nav" style="top: 0;"><div class="site-nav-menu">
        <ul class="nav" role="menu">
<li class="nav-item" role="menuitem"><a class="nav-logo" href="../../"><img src="../../assets/img/xdev_logo.png" alt="Xdev"></a></li>
          
        <li class="nav-item" role="menuitem"><a class="nav-link" href="../../pages/about/">About</a></li>
        <li class="nav-item" role="menuitem"><a class="nav-link" href="../../rss.xml">RSS</a></li>
        <li class="nav-item" role="menuitem"><a class="nav-link" href="../../pages/status/">Dashboard</a></li>

          

        </ul>
</div>
      <div class="site-nav-social">
        <a href="https://github.com/NCAR/xdev" class="social-link" target="_blank"><span class="icon-github"></span></a>
        <a href="https://twitter.com/NCARXdev" class="social-link" target="_blank"><span class="icon-twitter"></span></a>
      </div>
    </nav>
</div>
    </header><main class="site-main outer" role="main"><div class="inner">
        

    <article class="post-full"><header class="post-full-header"><h1 class="post-full-title">Intake-esm Release 2020.3.16</h1>
        <section class="post-meta"><time class="post-meta-date" datetime="2020-03-18T09:00:00-06:00">
            2020 March 18
          </time><span class="post-meta-divider">|</span>
          <a href="../../authors/anderson-banihirwe/">Anderson Banihirwe</a>
          <span class="post-meta-divider">|</span>
          <a href="../../tags/intake/">intake</a>, 
          <a href="../../tags/tooling/">tooling</a>
        </section></header><section class="post-full-content"><div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I'm pleased to announce the release of <code>intake-esm</code> version 2020.3.16. This is a new release with bug fixes and new features. Everyone is invited to give it a try, and make their thoughts, suggestions, feedback known! This blogpost outlines these changes. Full changelog is available <a href="https://intake-esm.readthedocs.io/en/latest/changelog.html#intake-esm-v2020-03-16">here</a>.</p>
<p>On GitHub: <a href="https://github.com/NCAR/intake-esm">https://github.com/NCAR/intake-esm</a></p>
<p>Documentation: <a href="https://intake-esm.readthedocs.io/">https://intake-esm.readthedocs.io/</a></p>
<!-- TEASER_END -->

<h3 id="Installation">Installation<a class="anchor-link" href="#Installation">¶</a>
</h3>
<p><code>Intake-esm</code> can be installed from PyPI with pip:</p>
<div class="highlight"><pre><span></span>python -m pip intall intake-esm --upgrade
</pre></div>
<p>It is also available from conda-forge channel for conda isntallations:</p>
<div class="highlight"><pre><span></span>conda install -c conda-forge intake-esm
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="New-Features">New Features<a class="anchor-link" href="#New-Features">¶</a>
</h3>
<h4 id="Enhanced-search:-enforce-query-criteria-via-require_all_on-argument">Enhanced search: enforce query criteria via <code>require_all_on</code> argument<a class="anchor-link" href="#Enhanced-search:-enforce-query-criteria-via-require_all_on-argument">¶</a>
</h4>
<p>By default <code>intake-esm</code>'s <code>search()</code> method returns entries that fulfill <strong>any of the criteria</strong> specified in the query. Today <code>intake-esm</code> can return entries that fulfill <strong>all query criteria</strong> when the user supplies the <code>require_all_on</code> argument. The <code>require_all_on</code> parameter can be <strong>a dataframe column</strong> or <strong>a list of dataframe columns</strong> across which all elements must satisfy the query criteria.</p>
<p>The <code>require_all_on</code> argument is best explained with the following example.  Consider the <code>intake-esm</code> catalog for the CMIP6 data stored on Google Cloud Storage:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Open collection for CMIP6 data hosted on Google Storage</span>
<span class="kn">import</span> <span class="nn">intake</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">"https://git.io/JvP9r"</span>
<span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">col</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[1]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>pangeo-cmip6-ESM Collection with 235624 entries:
	&gt; 15 activity_id(s)

	&gt; 32 institution_id(s)

	&gt; 69 source_id(s)

	&gt; 101 experiment_id(s)

	&gt; 135 member_id(s)

	&gt; 29 table_id(s)

	&gt; 313 variable_id(s)

	&gt; 10 grid_label(s)

	&gt; 235624 zstore(s)

	&gt; 60 dcpp_init_year(s)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's define a query for our collection that requests multiple <code>variable_ids</code> and multiple <code>experiment_ids</code> from the Omon <code>table_id</code>, all from 3 different <code>source_ids</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Define our query</span>

<span class="n">query</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">variable_id</span><span class="o">=</span><span class="p">[</span><span class="s2">"thetao"</span><span class="p">,</span> <span class="s2">"o2"</span><span class="p">],</span>
    <span class="n">experiment_id</span><span class="o">=</span><span class="p">[</span><span class="s2">"historical"</span><span class="p">,</span> <span class="s2">"ssp245"</span><span class="p">,</span> <span class="s2">"ssp585"</span><span class="p">],</span>
    <span class="n">table_id</span><span class="o">=</span><span class="p">[</span><span class="s2">"Omon"</span><span class="p">],</span>
    <span class="n">source_id</span><span class="o">=</span><span class="p">[</span><span class="s2">"ACCESS-ESM1-5"</span><span class="p">,</span> <span class="s2">"AWI-CM-1-1-MR"</span><span class="p">,</span> <span class="s2">"FGOALS-f3-L"</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now, let's use this <code>query</code> to search for all assets in the collection that satisfy <em>any combination</em> of these requests (i.e., with <code>require_all_on=None</code>, which is the default):</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">col_subset</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="o">**</span><span class="n">query</span><span class="p">)</span>

<span class="n">col_subset</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"source_id"</span><span class="p">)[</span>
    <span class="p">[</span><span class="s2">"experiment_id"</span><span class="p">,</span> <span class="s2">"variable_id"</span><span class="p">,</span> <span class="s2">"table_id"</span><span class="p">]</span>
<span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
      <th>experiment_id</th>
      <th>variable_id</th>
      <th>table_id</th>
    </tr>
<tr>
<th>source_id</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
</thead>
<tbody>
<tr>
<th>ACCESS-ESM1-5</th>
      <td>3</td>
      <td>2</td>
      <td>1</td>
    </tr>
<tr>
<th>AWI-CM-1-1-MR</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
    </tr>
<tr>
<th>FGOALS-f3-L</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
</tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As you can see, the search results above include <code>source_ids</code> for which we only have one of the two variables, and one or two of the three experiments.</p>
<p>We can tell <code>intake-esm</code> to discard any <code>source_id</code> that doesn't have <em>both</em> variables <code>["thetao", "o2"]</code> <em>and</em> all three experiments <code>["historical", "ssp245", "ssp585"]</code> by passing <code>require_all_on=["source_id"]</code> to the search method:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, let's search for assets that fulfill our query with <code>require_all_on=["source_id"]</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">col_subset</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">require_all_on</span><span class="o">=</span><span class="p">[</span><span class="s2">"source_id"</span><span class="p">],</span> <span class="o">**</span><span class="n">query</span><span class="p">)</span>
<span class="n">col_subset</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"source_id"</span><span class="p">)[</span>
    <span class="p">[</span><span class="s2">"experiment_id"</span><span class="p">,</span> <span class="s2">"variable_id"</span><span class="p">,</span> <span class="s2">"table_id"</span><span class="p">]</span>
<span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[4]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
      <th>experiment_id</th>
      <th>variable_id</th>
      <th>table_id</th>
    </tr>
<tr>
<th>source_id</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
</thead>
<tbody><tr>
<th>ACCESS-ESM1-5</th>
      <td>3</td>
      <td>2</td>
      <td>1</td>
    </tr></tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notice that with the <code>require_all_on=["source_id"]</code> option, the only <code>source_id</code> that was returned by our query was the <code>source_id</code> for which all of the variables and experiments were found.</p>
<p>Thanks to <a href="https://github.com/jbusecke">Julius Busecke</a> for proposing this feature and reviewing the implementation.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Single-File-Catalogs">Single File Catalogs<a class="anchor-link" href="#Single-File-Catalogs">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The earlier version of <a href="https://github.com/NCAR/esm-collection-spec">esm collection spec</a> required that the <code>catalog_file</code> entry in the input JSON file point to a CSV file. In some cases, it is useful to embed the content that would otherwise be in the CSV file in the input JSON file, itself. To support this use case, a <code>catalog_dict</code> entry was added to the esm collection spec (see <a href="https://github.com/NCAR/esm-collection-spec/pull/15">NCAR/esm-collection-spec#15</a>)</p>
<p>Example:</p>
<p><code>sample-collection.json</code>:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">"esmcat_version"</span><span class="p">:</span><span class="s2">"0.1.0"</span><span class="p">,</span>
    <span class="nt">"id"</span><span class="p">:</span><span class="s2">"aws-cesm1-le"</span><span class="p">,</span>
    <span class="nt">"description"</span><span class="p">:</span><span class="s2">"This is an ESM collection for CESM1 Large Ensemble Zarr dataset publicly available on Amazon S3 (us-west-2 region)"</span><span class="p">,</span>
    <span class="nt">"catalog_file"</span><span class="p">:</span> <span class="s2">"sample-catalog.csv"</span><span class="p">,</span>
    <span class="nt">"attributes"</span><span class="p">:[</span>
        <span class="p">{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"component"</span><span class="p">,</span> <span class="nt">"vocabulary"</span><span class="p">:</span><span class="s2">""</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"frequency"</span><span class="p">,</span> <span class="nt">"vocabulary"</span><span class="p">:</span><span class="s2">""</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"experiment"</span><span class="p">,</span> <span class="nt">"vocabulary"</span><span class="p">:</span><span class="s2">""</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"variable"</span><span class="p">,</span> <span class="nt">"vocabulary"</span><span class="p">:</span> <span class="s2">""</span><span class="p">}</span>
        <span class="p">],</span>

    <span class="nt">"assets"</span><span class="p">:{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"path"</span><span class="p">,</span> <span class="nt">"format"</span><span class="p">:</span><span class="s2">"zarr"</span><span class="p">},</span>
    <span class="err">...</span>
 <span class="p">}</span>
</pre></div>
<p><code>sample-catalog.csv</code>:</p>

<pre><code>component,frequency,experiment,variable,path
atm,daily,20C,FLNS,s3://ncar-cesm-lens/atm/daily/cesmLE-20C-FLNS.zarr
atm,daily,20C,FLNSC,s3://ncar-cesm-lens/atm/daily/cesmLE-20C-FLNSC.zarr</code></pre>
<p>For the example above, we have both <code>sample-collection.json</code> and <code>sample-catalog.csv</code> files. We can put the content of the <code>sample-catalog.csv</code> in the <code>sample-collection.json</code> file as follows:</p>
<p><code>sample-collection.json</code>:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">"esmcat_version"</span><span class="p">:</span><span class="s2">"0.1.0"</span><span class="p">,</span>
    <span class="nt">"id"</span><span class="p">:</span><span class="s2">"aws-cesm1-le"</span><span class="p">,</span>
    <span class="nt">"description"</span><span class="p">:</span><span class="s2">"This is an ESM collection for CESM1 Large Ensemble Zarr dataset publicly available on Amazon S3 (us-west-2 region)"</span><span class="p">,</span>
    <span class="nt">"catalog_dict"</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="nt">"component"</span><span class="p">:</span><span class="s2">"atm"</span><span class="p">,</span>
            <span class="nt">"frequency"</span><span class="p">:</span><span class="s2">"daily"</span><span class="p">,</span>
            <span class="nt">"experiment"</span><span class="p">:</span><span class="s2">"20C"</span><span class="p">,</span>
            <span class="nt">"variable"</span><span class="p">:</span><span class="s2">"FLNS"</span><span class="p">,</span>
            <span class="nt">"path"</span><span class="p">:</span><span class="s2">"s3://ncar-cesm-lens/atm/daily/cesmLE-20C-FLNS.zarr"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">"component"</span><span class="p">:</span><span class="s2">"atm"</span><span class="p">,</span>
            <span class="nt">"frequency"</span><span class="p">:</span><span class="s2">"daily"</span><span class="p">,</span>
            <span class="nt">"experiment"</span><span class="p">:</span><span class="s2">"20C"</span><span class="p">,</span>
            <span class="nt">"variable"</span><span class="p">:</span><span class="s2">"FLNSC"</span><span class="p">,</span>
            <span class="nt">"path"</span><span class="p">:</span><span class="s2">"s3://ncar-cesm-lens/atm/daily/cesmLE-20C-FLNSC.zarr"</span>
        <span class="p">},</span>
       <span class="err">...</span>
    <span class="p">],</span>
  <span class="nt">"attributes"</span><span class="p">:[</span>
        <span class="p">{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"component"</span><span class="p">,</span> <span class="nt">"vocabulary"</span><span class="p">:</span><span class="s2">""</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"frequency"</span><span class="p">,</span> <span class="nt">"vocabulary"</span><span class="p">:</span><span class="s2">""</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"experiment"</span><span class="p">,</span> <span class="nt">"vocabulary"</span><span class="p">:</span><span class="s2">""</span><span class="p">},</span>
        <span class="p">{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"variable"</span><span class="p">,</span> <span class="nt">"vocabulary"</span><span class="p">:</span> <span class="s2">""</span><span class="p">}</span>
        <span class="p">],</span>

    <span class="nt">"assets"</span><span class="p">:{</span> <span class="nt">"column_name"</span><span class="p">:</span><span class="s2">"path"</span><span class="p">,</span> <span class="nt">"format"</span><span class="p">:</span><span class="s2">"zarr"</span><span class="p">},</span>
    <span class="err">...</span>

<span class="p">}</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And you can now see that the <code>catalog_file</code> entry has been replaced with the appropriate <code>catalog_dict</code> entry. Now, we have to keep track of a single file (<code>sample-collection.json</code>) which <code>intake-esm</code> can parse:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">intake</span>
<span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="s2">"sample-collection.json"</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Thanks to <a href="https://github.com/jhamman">Joe Hamman</a> for proposing this feature and reviewing the implementation. Thanks to <a href="https://github.com/bonnland">Brian Bonnlander</a> for implementing this feature.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Relative-paths-for-catalog-files">Relative paths for catalog files<a class="anchor-link" href="#Relative-paths-for-catalog-files">¶</a>
</h4>
<p>Fetching and loading catalog files in earlier version of <code>intake-esm</code> required using absolute paths/urls for the catalog file (CSV).</p>
<p>For example:</p>
<ul>
<li>
<code>old_sample.json</code>: <div class="highlight"><pre><span></span><span class="p">{</span>
<span class="nt">"esmcat_version"</span><span class="p">:</span> <span class="s2">"0.1.0"</span><span class="p">,</span>
<span class="nt">"id"</span><span class="p">:</span> <span class="s2">"campaign-cesm2-cmip6-timeseries"</span><span class="p">,</span>
<span class="nt">"description"</span><span class="p">:</span> <span class="s2">"ESM collection for the CESM2 raw output that went into CMIP6 data. Located in campaign storage, accessible via GLADE on casper"</span><span class="p">,</span>
<span class="nt">"catalog_file"</span><span class="p">:</span> <span class="s2">"/glade/collections/cmip/catalog/intake-esm-datastore/catalogs/campaign-cesm2-cmip6-timeseries.csv.gz"</span><span class="p">,</span>
  <span class="err">...</span>
<span class="p">}</span>
</pre></div>
</li>
</ul>
<p>Today  the <code>catalog_file</code> can point to a full path or a path relative to the input JSON file path:</p>
<ul>
<li>
<code>new_sample.json</code>:<div class="highlight"><pre><span></span><span class="p">{</span>
<span class="nt">"esmcat_version"</span><span class="p">:</span> <span class="s2">"0.1.0"</span><span class="p">,</span>
<span class="nt">"id"</span><span class="p">:</span> <span class="s2">"campaign-cesm2-cmip6-timeseries"</span><span class="p">,</span>
<span class="nt">"description"</span><span class="p">:</span> <span class="s2">"ESM collection for the CESM2 raw output that went into CMIP6 data. Located in campaign storage, accessible via GLADE on casper"</span><span class="p">,</span>
<span class="nt">"catalog_file"</span><span class="p">:</span> <span class="s2">"campaign-cesm2-cmip6-timeseries.csv.gz"</span><span class="p">,</span>
  <span class="err">...</span>
<span class="p">}</span>
</pre></div>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Acknowledgements">Acknowledgements<a class="anchor-link" href="#Acknowledgements">¶</a>
</h3>
<p>The following people contributed to the <a href="https://github.com/NCAR/intake-esm">NCAR/intake-esm</a>, <a href="https://github.com/NCAR/esm-collection-spec">NCAR/esm-collection-spec</a> repositories since <code>intake-esm</code> release <code>2019.12.13</code> on December 13th, 2019:</p>
<ul>
<li>Anderson Banihirwe</li>
<li>Brian Bonnlander</li>
<li>Joe Hamman</li>
<li>Julius Busecke</li>
</ul>
</div>
</div>
</div>
 

<script type="application/vnd.jupyter.widget-state+json">
{"state": {}, "version_major": 2, "version_minor": 0}
</script>
</div></section></article><footer class="post-footer"><section class="comments hidden-print"><h2 style="padding-left: 3vw">Comments</h2>
        <script src="https://utteranc.es/client.js" repo="NCAR/xdev-blog-comments" issue-term="title" theme="github-light" crossorigin="anonymous" async>
        </script></section><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script></footer>
</div>
    </main><footer class="site-footer outer"><div class="site-footer-content inner">
        <div class="site-footer-image" style="width: 409px; height: 40px;">
          <a href="https://www2.cisl.ucar.edu/"><img src="../../assets/img/CISL-contemp-logo-white.svg" alt="CISL"></a>
        </div>
        <div class="site-footer-section">
          <section><a href="https://www.ucar.edu/">University Corporation for Atmospheric Research</a> © 2020<br>Proudly published with <a href="https://getnikola.com/">Nikola</a> &amp; <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a><br>Apache 2.0</section>
</div>
      </div>
      <div class="site-footer-content inner" style="border: 0; padding: 0; flex-wrap: nowrap;">
        <div class="site-footer-image" style="width: 60px; height: 60px;">
          <a href="https://nsf.gov/"><img src="../../assets/img/footer-logo-nsf.png" alt="NSF"></a>
        </div>
        <div class="site-footer-section" style="width: 100%;">
          <section>This material is based upon work supported by the National Center for Atmospheric Research, a major facility sponsored by the National Science Foundation and managed by the University Corporation for Atmospheric Research. Any opinions, findings and conclusions or recommendations expressed in this material do not necessarily reflect the views of the National Science Foundation.</section>
</div>
      </div>
    </footer>
</div>
  
    <script type="text/javascript" src="../../assets/js/jquery.js"></script><script type="text/javascript" src="../../assets/js/jquery.fitvids.js"></script><script type="text/javascript" src="../../assets/js/index.js"></script>
</body>
</html>
